<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" href="https://lh3.googleusercontent.com/a-/AOh14GhOePmZG8g0wja3nBL_o7igPEyY8svB8UQuXjC4Gg=s120-cc-rg" type="image/icon type">
    <link rel="stylesheet" href="alarm.css">
</head>
<body>
    <ul>    
        <li><a href="index.html">Analog</a></li>
        <li><a href="stopwatch.html">Stopwatch</a></li>
        <li><a href="alarm.html" class="activated">Alarm</a></li>
    </ul>

    <div class="container" id="container">
        <div class="input-box">
            <span>hr</span>
            <input type="number" id="hr" required autocomplete="off" autofocus>
            <br>
            <span>min</span>
            <input type="number" id="min" required autocomplete="false">

        </div>
        <div class="switchbtn">
            <button id="off" onclick="off()" type="button">Off</button>
            <button id="on" onclick="on()" type="button">On</button>
        </div>
    </div>

    <img src="sleep.png" alt="sleeping boy" id="sleep">
    <img src="wake.gif" alt="" id="wake" style="opacity: 0;">

    <audio id="myAudio">
        <source src="alarm.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>
      


      <script>
        var x = document.getElementById("myAudio"); 
    
        function on()
        {
            var hr = Number(document.getElementById('hr').value);
            var min = Number(document.getElementById('min').value);
            var toDay = new Date();
            var alarmTime = new Date(toDay.getUTCFullYear(),toDay.getUTCMonth(),toDay.getUTCDate(),hr,min);
            var differenceInMs = alarmTime.getTime() - (new Date()).getTime();
            console.log(differenceInMs);
            if(differenceInMs<0)
            {
                alert("Time has already passed!")
                return
            }

            document.getElementById('off').style.opacity="0";
            document.getElementById('on').style.opacity="1";
            document.getElementById('container').style.borderColor="#fffafa";
            setTimeout(()=>{
                x.play();
                document.getElementById('wake').style.opacity="1"
            },differenceInMs)
        }
        function off()
        {
            document.getElementById('off').style.opacity="1";
            document.getElementById('on').style.opacity="0";
            document.getElementById('container').style.borderColor="#ff105e";
            x.pause();
        }
    </script>
</body>
</html>